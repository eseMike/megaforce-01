<section class="gallery" aria-labelledby="gallery-title">
  <div class="gallery__container">
    <header class="gallery__head">
      <h2 id="gallery-title" class="gallery__title">
        <span class="gallery__title-hand">{{ resolvedTitle }}</span>
      </h2>
      <nav class="gallery__filters" aria-label="Filtros de galería">
        <button
          *ngFor="let tab of tabs"
          class="pill"
          [class.is-active]="activeTab === tab.key"
          type="button"
          (click)="setActiveTab(tab.key)"
        >
          {{ i18n.t(tab.labelKey) }}
        </button>
      </nav>
    </header>

    <div class="gallery__grid" role="list">
      <!-- Normal tabs (photos, videos) -->
      <ng-container *ngIf="activeTab !== 'packages'">
        <article class="gallery-card" role="listitem"
                 *ngFor="let item of currentItems">
          <img class="gallery-card__image"
               [src]="item.src"
               [alt]="item.alt || item.title"
               loading="lazy" />
          <span class="gallery-card__frame"></span>
          <div class="gallery-card__body">
            <h3 class="gallery-card__title" *ngIf="item.title">{{ item.title }}</h3>
          </div>
        </article>
      </ng-container>


      <!-- Packages tab: cada paquete = 2 tarjetas independientes (ficha izquierda, setup derecha) -->
      <ng-container *ngIf="activeTab === 'packages'">
        <ng-container *ngFor="let pack of packages; let i = index">
          <article class="gallery-card gallery-card--contain" role="listitem">
            <img class="gallery-card__image"
                 [src]="pack.ficha"
                 [alt]="pack.alt || ('Paquete ' + (i + 1) + ' ficha')"
                 loading="lazy" />
            <span class="gallery-card__frame"></span>
          </article>
          <article class="gallery-card gallery-card--contain" role="listitem">
            <img class="gallery-card__image"
                 [src]="pack.setup"
                 [alt]="pack.alt || ('Paquete ' + (i + 1) + ' setup')"
                 loading="lazy" />
            <span class="gallery-card__frame"></span>
          </article>
        </ng-container>
      </ng-container>
    </div>

    <!-- CTA: Ver más / Ver menos (solo en pestaña Fotos) -->
    <div class="gallery__cta" *ngIf="activeTab === 'photos'">
      <button *ngIf="!showMore" class="btn btn--primary" type="button" (click)="toggleMore()">
        Ver más fotos
      </button>
      <button *ngIf="showMore" class="btn" type="button" (click)="toggleMore()">
        Ver menos
      </button>
    </div>

    <!-- Segunda grilla (idéntica a la principal) -->
    <div class="gallery__grid gallery__grid--extra" role="list" *ngIf="activeTab === 'photos' && showMore">
      <article class="gallery-card" role="listitem" *ngFor="let extra of extraItems">
        <img class="gallery-card__image"
             [src]="extra.src"
             [alt]="extra.alt || extra.title"
             loading="lazy" />
        <span class="gallery-card__frame"></span>
        <div class="gallery-card__body">
          <h3 class="gallery-card__title" *ngIf="extra.title">{{ extra.title }}</h3>
        </div>
      </article>
    </div>
  </div>
</section>
